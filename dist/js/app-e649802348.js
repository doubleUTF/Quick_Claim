function init(){if(!store.enabled)return void alert('Local storage is not supported by your browser. Please disable "Private Mode", or upgrade to a modern browser.')}function getCptArray(){var e=store.getAll();delete e.cptList;var t=$.map(e,function(e,t){return e});return t}function updateSelect(){$('select[name="cptList"]').select2({placeholder:"Select a code",allowClear:!0,data:getCptArray()})}function addCpt(){clearFields();var e=$("#addCptInput").val();currentCpt=e,console.log("addCpt currentcpt: "+currentCpt);var t=$('select[name="cptList"]').select2(),s=$.extend({},cptObj);s.id=e,s.text=e,store.set("cpt"+e,s),updateSelect(),$("#addCptInput").val(""),t.val(e).trigger("change"),$("#cptHeader").text("CPT- "+e),$("#cptDetails").addClass("show"),$("#inputCharge").focus(),showButtons()}function saveCpt(e){var t=0,s=$.extend({},cptObj);s.id=e,s.text=e;for(p in cptObj)"id"!=p&&"text"!=p&&(s[p]=$("#"+cptDetailHtmlList[t]).val(),t++);console.log(s),console.log("cpt: "+e),store.set("cpt"+e,s),clearProfilesTab(),$("#successMsg").addClass("valid").addClass("show").text("Saved CPT:  "+e)}function deleteCpt(){var e=getCurrentCpt();$('select[name="cptList"]').find("[value="+e+"]").remove().trigger("change"),store.remove("cpt"+e),clearProfilesTab(),$("#successMsg").addClass("show").text("Deleted CPT  "+e).addClass("deleted").addClass("text-center")}function showButtons(){$("#inputSave").addClass("show"),$("#inputDelete").addClass("show")}function hideButtons(){$("#inputSave").removeClass("show"),$("#inputDelete").removeClass("show")}function populateFields(e){var t=0,s=store.get("cpt"+e);for(p in s)"id"!=p&&"text"!=p&&($("#"+cptDetailHtmlList[t]).val(s[p]),t++)}function clearFields(){for(var e=0;e<cptDetailHtmlList.length;e++)$("#"+cptDetailHtmlList[e]).val("")}function clearProfilesTab(){$("#cptHeader").html("&nbsp"),$("#successMsg").removeClass("show"),$("#cptDetails").removeClass("show"),$('select[name="cptList"]').val(null).trigger("change"),$("#statusMsg >label").text(""),$("#addCptInput").val(""),hideButtons(),clearFields(),currentCpt=""}function checkCptInArray(e){var t=$('select[name="cptList"] option').map(function(){return $(this).val()}).toArray();return numInList(e,t)}function numInList(e,t){var s=t.indexOf(e);return s!=-1}function getCurrentCpt(){var e=$("#cptHeader").text();if(e){var t=e.replace(/([A-Za-z-\s])+/,"");return t}}function renderStatus(e,t){var s=e.match(/^(.*?:\/{2,3})?(.+?)(\/|$)/)[2],r=$.grep(supported_sites,function(e){return e.url===s});if($("#statusOn").html('<span class="link">'+s+"</span>"),0==r.length)$("#siteStatus").text("Current site not supported").addClass("notSupported");else if(1==r.length){var a=r[0];switch(a.name){case"Office_Ally_Dev":case"OA-Actual":case"Office_Ally":case"Demo_Office_Ally":enableForm(),$("#siteStatus").text(a.name+" is supported!").addClass("supported"),$("#undoForm").prop("disabled",!1).on("click",function(){chrome.tabs.sendMessage(t[0].id,{message:"undoForm",siteObj:JSON.stringify(a)},function(e){ResponseHandler(e)})}),chrome.tabs.sendMessage(t[0].id,{message:"getDiagnoses",siteName:a.name},function(e){if($("#fillForm").on("click",function(){fillFormHandler(a,t[0].id)}),"{}"!=e){if(getObjLength(e)>4)return void $("#statusBarMsg").text("More than 4 diagnoses detected. Column 24.E will not be filled due to site limitations.").addClass("warning");$("#statusBarMsg").text(getObjLength(e)+" diagnosis code(s) detected, Enter CPT Codes.").addClass("supported")}else $("#statusBarMsg").text("No diagnosis detected in section 21. You will enter diagnosis pointers manually for each row.")});break;default:$("#siteStatus").text(a.name+" is not yet supported").addClass("notSupported")}}}function getObjLength(e){var t=0;diagObj=JSON.parse(e);for(p in diagObj)t+=1;return t}function getUserInput(e){for(var t=$("#cptForm").serializeArray(),s=$("#datesForm").serializeArray(),r={},a=[],o=0;o<6;o++){var n={};if(t[o].value){var l=store.get("cpt"+t[o].value);l&&(n=objectTrimmer(l)),r["cpt"+t[o].value]=n}}for(var o=0;o<9;o++)s[o].value&&a.push(s[o].value);var i=Object.keys(r).length*a.length;i>e.maxRows&&$("#statusBarMsg").text("12 Rows limit reached. Further rows will not be added.").addClass("warning");var c={cpts:r,dates:a,rows:i};return c}function fillFormHandler(e,t){var s=getUserInput(e);chrome.tabs.sendMessage(t,{message:"fillForm",siteObj:JSON.stringify(e),claimObj:JSON.stringify(s)},function(e){ResponseHandler(e)})}function objectTrimmer(e){j={};for(p in e)e[p]&&(j[p]=e[p]);return j}function disableForm(){$("#cptFieldSet").prop("disabled",!0),$("#datesFieldSet").prop("disabled",!0)}function enableForm(){$("#cptFieldSet").prop("disabled",!1),$("#datesFieldSet").prop("disabled",!1)}function getCurrentTabId(){chrome.tabs.query({active:!0,lastFocusedWindow:!0},function(e){if(1==e.length)return e[0].id;throw error("Unknown tab count")})}function disableFillButton(){$("#fillForm").prop("disabled",!0)}function enableFillButton(){$("#fillForm").prop("disabled",!1)}function ResponseHandler(e){console.log(e);var t=/^Success/,s=/^Invalid/;t.exec(e)?$("#fillResponse").text(e).addClass("success").removeClass("fail"):s.exec(e)?$("#fillResponse").text(e).addClass("fail").removeClass("success"):$("#fillResponse").text(e).removeClass("fail").removeClass("success")}$(function(){var e="";init(),updateSelect(),$('select[name="cptList"]').on("select2:select",function(t){var s=t.currentTarget.value;e=s,console.log("Current cpt: "+e),$("#cptHeader").text("CPT- "+s),$("#cptDetails").addClass("show"),$("#statusMsg >label").text(""),$("#inputCharge").focus(),showButtons(),populateFields(e)}),$('select[name="cptList"]').on("select2:unselect",function(t){e="",clearProfilesTab()}),$('select[name="cptList"]').on("change",function(){$("#successMsg").text("")}),$('a[href="#profiles"]').on("hide.bs.tab",clearProfilesTab),$("#inputDelete").on("click",function(){deleteCpt()}),$("#cptAdd").validate({rules:{addCptInput:{minlength:5,digits:!0,blank:!0,cptInArray:!0}},messages:{addCptInput:{minlength:"CPT Code must be length of 5"}},errorLabelContainer:"#statusMsg",submitHandler:addCpt,errorClass:"error"}),jQuery.validator.addMethod("cptInArray",function(e,t){var s=$("#addCptInput").val();return!checkCptInArray(s)},"CPT already in database"),jQuery.validator.addMethod("blank",function(e){var t=$("#addCptInput").val();return""!=t},"CPT Code must be length of 5"),$("#cptDetails").validate({rules:{inputCharge:{number:!0}},success:function(e){$("#inputSave").prop("disabled",!1)},submitHandler:function(){console.log("Saving cpt: "+getCurrentCpt()),$("#inputSave").click(saveCpt(getCurrentCpt()))},errorLabelContainer:"#statusMsg",invalidHandler:function(){$("#inputSave").prop("disabled",!0)}})});const cptDetailHtmlList=["inputCharge","inputPlace","inputDays","inputEmg","inputModA","inputModB","inputModC","inputModD","inputEpsdt"],cptObj={id:"",text:"",charge:"",place:"",days:"",emg:"",modA:"",modB:"",modC:"",modD:"",epsdt:""};window.addEventListener("DOMContentLoaded",function(){chrome.tabs.query({active:!0,lastFocusedWindow:!0},function(e){if(1!=e.length)throw new Error("Unexpected tab count");var t=e[0].url;renderStatus(t,e)}),$(".autoinput").keyup(function(e){var t=(e.keyCode,String.fromCharCode(e.keyCode)),s=t.match(/\w/),r=this.id,a=this.id[r.length-1],o=r.substring(0,r.length-1)+(parseInt(a)+1);!s&&"`"!=t||this.value.length!=this.maxLength||$("#"+o).focus()}),disableForm(),$(".date").mask("00/00/0000",{placeholder:"__/__/____"}),$("#cptForm").validate({rules:{inputProcedure:{number:!0,digits:!0,minlength:5}},messages:{inputProcedure:{number:"Numbers only"}},errorClass:"error",errorLabelContainer:"#cptMsg"}),$("#datesForm").validate({rules:{dateOfService:{dateValidate:!0}},errorClass:"error",errorLabelContainer:"#dateMsg"}),jQuery.validator.addMethod("dateValidate",function(e){var t=/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/2\d{3}$/;return t.test(e)||""==e?(enableFillButton(),!0):void disableFillButton()},"Incorrect MM/DD/YYYY format"),$("#clearForm").on("click",function(){$("#cptForm").trigger("reset"),$("#fillResponse").text("Form cleared").removeClass("success").removeClass("fail")}),$("#closePopup").on("click",function(){window.close()})}),$(function(){chrome.commands.getAll(function(e){var t=e[0].shortcut;$("#shortcut").text("Shortcut Key: "+t).on("click",function(){chrome.tabs.create({url:"chrome://extensions/configureCommands"})})}),$("#githubBtn").on("click",function(){chrome.tabs.create({url:"https://github.com/doubleUTF/Quick_Claim"})})});const supported_sites=[{name:"Office_Ally",url:"www.officeally.com",supported:!0,selectors:{prefix:"ctl00_phFolderContent_ucHCFA_ucHCFALineItem_ucClaimLineItem_",fromMonth:"FM_DATE_OF_SVC_MONTH",fromDay:"FM_DATE_OF_SVC_DAY",fromYear:"FM_DATE_OF_SVC_YEAR",toMonth:"TO_DATE_OF_SVC_MONTH",toDay:"TO_DATE_OF_SVC_DAY",toYear:"TO_DATE_OF_SVC_YEAR",placeOfService:"PLACE_OF_SVC",emg:"EMG",cpt:"CPT_CODE",modA:"MODIFIER_A",modB:"MODIFIER_B",modC:"MODIFIER_C",modD:"MODIFIER_D",diagnosis:"DOS_DIAG_CODE",charges:"DOS_CHRG",units:"UNITS",epsdt:"EPSDT_FAMILY_PLAN",table_rows_id:"Table1 > tbody> tr",diag21:"ctl00_phFolderContent_ucHCFA_DIAGNOSIS_CODECMS0212_"},maxDiagnosisPointers:4,defaultRows:12,maxRows:50},{name:"Ability_Network",url:"",supported:!1,selectors:{}},{name:"United_Health_Care",url:"provider-linkhealth.unitedhealthcareonline.com",supported:!1,selectors:{}},{name:"Availity",url:"",supported:!1,selectors:{}},{name:"Navinet",url:"",supported:!1,selectors:{}},{name:"Navicure",url:"",supported:!1,selectors:{}},{name:"Claim MD",url:"",supported:!1,selectors:{}},{name:"Practice Suite",url:"",supported:!1,selectors:{}},{name:"Apex Edi",url:"",supported:!1,selectors:{}},{name:"Emdeon",url:"",supported:!1,selectors:{}},{name:"Zirmed",url:"",supported:!1,selectors:{}},{name:"Relayhealth",url:"",supported:!1,selectors:{}},{name:"Mckesson",url:"",supported:!1,selectors:{}},{name:"Realmed",url:"",supported:!1,selectors:{}},{name:"OA-Actual",url:"localhost:8000",supported:!0,selectors:{prefix:"ctl00_phFolderContent_ucHCFA_ucHCFALineItem_ucClaimLineItem_",fromMonth:"FM_DATE_OF_SVC_MONTH",fromDay:"FM_DATE_OF_SVC_DAY",fromYear:"FM_DATE_OF_SVC_YEAR",toMonth:"TO_DATE_OF_SVC_MONTH",toDay:"TO_DATE_OF_SVC_DAY",toYear:"TO_DATE_OF_SVC_YEAR",placeOfService:"PLACE_OF_SVC",emg:"EMG",cpt:"CPT_CODE",modA:"MODIFIER_A",modB:"MODIFIER_B",modC:"MODIFIER_C",modD:"MODIFIER_D",diagnosis:"DOS_DIAG_CODE",charges:"DOS_CHRG",units:"UNITS",epsdt:"EPSDT_FAMILY_PLAN",table_rows_id:"Table1 > tbody> tr"},maxDiagnosisPointers:4,maxRows:12},{name:"Office_Ally_Dev",url:"localhost:8001",supported:!0,defaultRows:12,selectors:{prefix:"ctl00_phFolderContent_ucHCFA_ucHCFALineItem_ucClaimLineItem_",fromMonth:"FM_DATE_OF_SVC_MONTH",fromDay:"FM_DATE_OF_SVC_DAY",fromYear:"FM_DATE_OF_SVC_YEAR",toMonth:"TO_DATE_OF_SVC_MONTH",toDay:"TO_DATE_OF_SVC_DAY",toYear:"TO_DATE_OF_SVC_YEAR",placeOfService:"PLACE_OF_SVC",emg:"EMG",cpt:"CPT_CODE",modA:"MODIFIER_A",modB:"MODIFIER_B",modC:"MODIFIER_C",modD:"MODIFIER_D",diagnosis:"DOS_DIAG_CODE",charges:"DOS_CHRG",units:"UNITS",epsdt:"EPSDT_FAMILY_PLAN",table_rows_id:"Table1 > tbody> tr"},maxDiagnosisPointers:4,maxRows:12},{name:"TriZetto_Provider_Solutions",url:"",supported:!1},{name:"Demo_Office_Ally",url:chrome.runtime.id,supported:!0,selectors:{prefix:"ctl00_phFolderContent_ucHCFA_ucHCFALineItem_ucClaimLineItem_",fromMonth:"FM_DATE_OF_SVC_MONTH",fromDay:"FM_DATE_OF_SVC_DAY",fromYear:"FM_DATE_OF_SVC_YEAR",toMonth:"TO_DATE_OF_SVC_MONTH",toDay:"TO_DATE_OF_SVC_DAY",toYear:"TO_DATE_OF_SVC_YEAR",placeOfService:"PLACE_OF_SVC",emg:"EMG",cpt:"CPT_CODE",modA:"MODIFIER_A",modB:"MODIFIER_B",modC:"MODIFIER_C",modD:"MODIFIER_D",diagnosis:"DOS_DIAG_CODE",charges:"DOS_CHRG",units:"UNITS",epsdt:"EPSDT_FAMILY_PLAN",table_rows_id:"Table1 > tbody> tr",diag21:"ctl00_phFolderContent_ucHCFA_DIAGNOSIS_CODECMS0212_"},maxDiagnosisPointers:4,defaultRows:12,maxRows:50}];